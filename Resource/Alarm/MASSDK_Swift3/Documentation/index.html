<!DOCTYPE html>
<html lang="en">
  <head>
    <title>MASSDK  Reference</title>
    <link rel="stylesheet" type="text/css" href="css/jazzy.css" />
    <link rel="stylesheet" type="text/css" href="css/highlight.css" />
    <meta charset='utf-8'>
    <script src="js/jquery.min.js" defer></script>
    <script src="js/jazzy.js" defer></script>
    
  </head>
  <body>
    <a title="MASSDK  Reference"></a>
    <header>
      <div class="content-wrapper">
        <p><a href="index.html">MASSDK Docs</a> (56% documented)</p>
      </div>
    </header>
    <div class="content-wrapper">
      <p id="breadcrumbs">
        <a href="index.html">MASSDK Reference</a>
        <img id="carat" src="img/carat.png" />
        MASSDK  Reference
      </p>
    </div>
    <div class="content-wrapper">
      <nav class="sidebar">
        <ul class="nav-groups">
          <li class="nav-group-name">
            <a href="Classes.html">Classes</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Classes/MASIAPManager.html">MASIAPManager</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MASManager.html">MASManager</a>
              </li>
              <li class="nav-group-task">
                <a href="Classes/MASStoreViewController.html">MASStoreViewController</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Enums.html">Enums</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Enums.html#/s:O6MASSDK15MASNotification">MASNotification</a>
              </li>
              <li class="nav-group-task">
                <a href="Enums.html#/s:O6MASSDK12MASUserState">MASUserState</a>
              </li>
            </ul>
          </li>
          <li class="nav-group-name">
            <a href="Protocols.html">Protocols</a>
            <ul class="nav-group-tasks">
              <li class="nav-group-task">
                <a href="Protocols.html#/s:P6MASSDK21MASIAPManagerDelegate">MASIAPManagerDelegate</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
      <article class="main-content">
        <section>
          <section class="section">
            
            <a href='#massdk_framework' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='massdk_framework'>📖 MASSDK framework</h1>
<a href='#requirements' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='requirements'>Requirements</h2>

<ul>
<li>iOS 8.0 and higher</li>
<li>only iDevices are supported, framework is <strong><code>not</code></strong> built for simulator</li>
<li><a href="https://github.com/krzyzanowskim/CryptoSwift"><code>CryptoSwift</code></a> library - we recommend to use <code>Cocoapods</code> to integrate this library in your project ( add <code>pod &#39;CryptoSwift&#39;</code> into your <code>Podfile</code> )</li>
<li>- <a href="https://github.com/SnapKit/SnapKit"><code>SnapKit</code></a> library - we recommend to use <code>Cocoapods</code> to integrate this library in your project ( add <code>pod &#39;SnapKit&#39;</code> into your <code>Podfile</code> )</li>
</ul>
<a href='#data_requirements_for_massdk_setup' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='data_requirements_for_massdk_setup'>Data requirements for MASSDK setup</h3>

<ul>
<li>Hash string of your app -&gt; provided by Us</li>
<li>App ID from iTunes Connect -&gt; for debug purposes use string <code>appID</code></li>
<li>Tracking Identifier string -&gt; provided by Us</li>
</ul>
<a href='#change_log' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='change_log'>Change log</h3>

<p>For more info read the whole document.</p>
<li><p>0.3.45:</p>

<ul>
<li>Fixed bug where app might crash while setting custom font in objC due to XCode swift optimization bug.</li>
</ul></li>
<li><p>0.3.44:</p>

<ul>
<li>MASManager.getToken() -&gt; String? function added.</li>
<li>MASManager.sharedInstance.baseAdDress changed to public</li>
</ul></li>
<li><p>0.3.43:</p>

<ul>
<li>Maintenance release</li>
</ul></li>
<li><p>0.3.42:</p>

<ul>
<li>Notification is sent after user buys IAP succesfully through MAS SDK store view controller</li>
</ul></li>
<li><p>0.3.41:</p>
<li>Reade updated. New code snippet of initial setup. (Chapter Usage, point 4)</li>
<li>MASIAPManager is accesible now</li>
<div class="aside aside-bug">
    <p class="aside-title">Bug</p>
    Bug fix: Promotion banner could become inactive and had no buttons to close.

</div>
<li>After user log in, there is new notification posted.</li></li>
<li><p>0.3.40:</p>

<ul>
<li>Menu Header Image was displayed in the status bar. Moved down, so status bar is not covering the image/banner any more.</li>
</ul></li>
<li><p>0.3.38:</p>

<ul>
<li>Small edits.</li>
</ul></li>
<li><p>0.3.37:</p>

<ul>
<li>After buing product, guidePostVC is shown instead of registrationVC</li>
</ul></li>
<li><p>0.3.36:</p>
<li><code>MASManager setup</code> added <code>Bool</code> for <code>releaseServer</code>. Set this to <code>true</code>.</li>
<li>Registration and Login screen. You can show login or registration guidepost screen by calling <code>MASManager.sharedInstance.showGuideWithMasterTouchView()</code> and login only by calling <code>MASManager.sharedInstance.loginUserWithMasterTouchLoginView()</code></li>
<div class="aside aside-bug">
    <p class="aside-title">Bug</p>
    Bug fix: AboutVC could crash if there was no displayed adds and MasterTouchLogo was turned off.

</div></li>
<a href='#installation' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='installation'>Installation</h2>

<ol>
<li>Add <a href="https://github.com/krzyzanowskim/CryptoSwift"><code>CryptoSwift</code></a> in to your project. We recommend using <code>Cocoapods</code></li>
<li>Add <a href="https://github.com/SnapKit/SnapKit"><code>SnapKit</code></a> in to your project. We recommend using <code>Cocoapods</code></li>
<li>Use this repository <code>https://gitlab.com/MAS_SDK/massdk.git</code> as submodule for your project. ( <code>git submodule add https://gitlab.com/MAS_SDK/massdk.git</code>)</li>
<li>Add <code>MASSDK.framework</code> from submodule repository to your project bundle.</li>
<li><p>Add <code>MASSDK.framework</code> to Embedded Binaries for your target.</p>

<p><img src="Assets/Screen3.png" alt=""></p></li>
<li><p>Set Embedded Content Contains Swift Code to <strong><code>Yes</code></strong> in your target Build Settings</p>

<p><img src="Assets/Screen4.png" alt=""></p></li>
</ol>
<a href='#example_projects' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h3 id='example_projects'>Example projects</h3>

<p>In folder <code>Examples</code> you can find <code>Swfit</code> and <code>Obj-C</code> example projects with imported <code>MASSDK.framework</code> and working setup.</p>
<a href='#usage' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='usage'>Usage</h2>

<p>There are few steps to do, before the MASSDK framework is ready to work.</p>
<a href='#setup' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='setup'>Setup</h4>

<ol>
<li><p>Import MASSDK Framework into your <code>AppDelegate.swift</code> or <code>AppDelegate.m</code></p>

<p>Swift: <code>import MASSDK</code></p>

<p>Obj-C: <code>#import &lt;MASSDK/MASSDK-Swift.h&gt;</code></p></li>
<li><p>Create custom shortcuts for your app</p>

<p>Swift:</p>

<p><code>let shortcut = MASMenuItem(name: &quot;Shortcut&quot;, iconImage: UIImage(named: &quot;Shortcut&quot;), target: self,  selector: &quot;shortcutTapped&quot;)</code></p>

<p><code>let shortcut2 = MASMenuItem(name: &quot;Shortcut 2&quot;, iconImage: UIImage(named: &quot;Shortcut2&quot;), target: self, selector: &quot;shortcut2Tapped&quot;)</code></p>

<p>Obj-C</p>

<p><code>MASMenuItem *shortcut = [[MASMenuItem alloc]initWithName:@&quot;Shortcut&quot; iconImage:[UIImage named:@&quot;Shortcut&quot;] target:self selector:@&quot;shortcutTapped&quot;];
</code></p>

<p><code>MASMenuItem *shortcut2 = [[MASMenuItem alloc]initWithName:@&quot;Shortcut 2&quot; iconImage:[UIImage named:@&quot;Shortcut2&quot;] target:self selector:@&quot;shortcut2Tapped&quot;];
</code></p></li>
<li><p>Setup <code>MASManager</code> in your AppDelegate</p>

<p>Swift:</p>

<p><code>MASManager.setup(&quot;AppHashYouReceived&quot;, appId: &quot;AppIdFromItunesConnect&quot;, trackingIdentifier: &quot;ProvidedTrackingIdentifier&quot;, menuItems: [shortcut, shortcut2], releaseServer: true)</code></p>

<p>Obj-C:</p>

<p><code>[MASManager setup:@&quot;AppHashYouReceived&quot; appId: @&quot;AppIdFromItunesConnect&quot; trackingIdentifier: @&quot;ProvidedTrackingIdentifier&quot; menuItems: @[shortcut1, shortcut2] releaseServer:YES];
</code></p></li>
</ol>
<pre class="highlight plaintext"><code>- where you will be providied with from us `AppHashYouReceived`
- where you can use string `"appID"` (or `@"appID"` for Obj-C) for testing purposes for `AppIdFromItunesConnect` 
- where `ProvidedTrackingIdentifier` is ID you will be provided
- `releaseServer` should be set to `false` or `NO` and before releasing application has to be set to `true` or `YES`
</code></pre>

<ol>
<li>Embed your Initial View Controller in subclass of <code>MASNavigationController</code>.</li>
</ol>

<ul>
<li><p>You can do it from code like this:</p>

<p>Swift:</p>

<p><code>let navigationController = MASNavigationController(rootViewController: YourViewController())</code></p>

<p>Obj-C:</p>

<p><code>MASNavigationController *navigationController = [[MASNavigationController alloc] initWithRootViewController: [YourViewController new]];
</code>
The final code should look like this:</p>

<p>Swift: <code>AppDelegate.swift</code></p>
<pre class="highlight plaintext"><code>func application(application: UIApplication, didFinishLaunchingWithOptions launchOptions: [NSObject: AnyObject]?) -&gt; Bool {  

    MASManager.setup("AppHashYouReceived", appId: "AppIdFromItunesConnect", trackingIdentifier: "ProvidedTrackingIdentifier", menuItems: [], releaseServer: true)    

    let viewController = ViewController()
    let navigationController = MASNavigationController(rootViewController: viewController)        
    self.window = UIWindow(frame: UIScreen.mainScreen().bounds)
    self.window!.rootViewController = navigationController
    self.window!.makeKeyAndVisible()
    return true 
    }
</code></pre>

<p>Obj-C: <code>AppDelegate.m</code></p>
<pre class="highlight plaintext"><code>- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {

[MASManager setup:@"AppHashYouReceived" appId: @"AppIdFromItunesConnect" trackingIdentifier: @"ProvidedTrackingIdentifier" menuItems: @[] releaseServer:YES];

ViewController* vc = [[ViewController alloc] init];
UINavigationController *navController;
navController = [[MASNavigationController alloc]initWithRootViewController:vc];

self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
self.window.rootViewController = navController;
[self.window makeKeyAndVisible];
return YES;
}
</code></pre></li>
<li><p>or in your Storyboard file just Embed your Initial View Controller in UINavigationController and subclass it in <code>MASNavigationController</code> class.</p></li>
</ul>

<p><img src="Assets/Screen1.png" alt=""></p>

<ul>
<li>and in <code>Indentity Inspector</code> you set up class for UINavigationController:</li>
</ul>

<p><img src="Assets/Screen2.png" alt=""> </p>

<hr>
<a href='#customization' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='customization'>Customization</h4>

<p>You can customize following parts of <code>MASSDK</code></p>
<a href='#menu_colors' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='menu_colors'>Menu Colors</h5>

<p><code>MASManager.shareInstance.menuBackgroundColor</code> ➡️ Menu Background Color</p>

<p><code>MASManager.shareInstance.menuCellBackgroundColor</code> ➡️ Menu Cell Background Color</p>

<p><code>MASManager.shareInstance.menuCellFontColor</code> ➡️ Font Color in Menu Cell</p>

<p><code>MASManager.shareInstance.menuCellFont</code> ➡️ Font in Menu Cell</p>

<p><code>MASManager.shareInstance.menuHeaderCellFont</code> ➡️ Font in Menu Section Header (e.g. Quick links)</p>

<p><code>MASManager.shareInstance.menuHeaderCellFontColor</code> ➡️ Font Color in Menu Section Header</p>

<hr>
<a href='#menu_header_image' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='menu_header_image'>Menu Header Image</h5>

<p><code>MASManager.shareInstance.showMenuHeader</code> ➡️ This flag will show/hide Header Image in Menu. This is implicitly set to <code>false</code>. Change this if you have been provided with Header Image.</p>

<hr>
<a href='#master_touch_app' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='master_touch_app'>Master Touch App</h5>

<p><code>MASManager.shareInstance.isMasterTouch</code> ➡️ If you have been instructed that your app is not going to be released under Master Touch, set this to <code>false</code>.</p>

<hr>
<a href='#custom_about_navigation_controller' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h5 id='custom_about_navigation_controller'>Custom About Navigation Controller</h5>

<p>To customize <code>UINavigationController</code> in About page, you need to set:</p>

<ul>
<li><code>MASManager.sharedInstance.customAboutNavigation</code> to <code>true</code></li>
</ul>

<p>You can customize colors and font by setting these properties:</p>

<ul>
<li><code>MASManager.sharedInstance.navigationBarColor</code></li>
<li><code>MASManager.sharedInstance.navigationBarTintColor</code></li>
<li><code>MASManager.sharedInstance.navigationBarTitleColor</code></li>
<li><code>MASManager.sharedInstance.navigationBarTitleFont</code></li>
</ul>

<hr>
<a href='#naming_conventions' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h4 id='naming_conventions'>Naming Conventions</h4>

<p>Following names were used for naming graphical assets inside MASSDK. If you want to or you were instructed to change default images of Menu or About page, please, name your images according this conventions and add images to your&rsquo;s app bundle.</p>

<ul>
<li>About Icon: <code>MASAbout</code></li>
<li>Menu Icon: <code>MASMenu</code></li>
<li>Rate Icon: <code>MASRate</code></li>
<li>Share Icon: <code>MASShare</code></li>
<li>Menu Header Image: <code>MASHeader</code></li>
<li>Logo in About: <code>MASLogo</code></li>
<li>Promotion Image: <code>MASTesla</code></li>
</ul>

<hr>
<a href='#reacting_for_massdk_events' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h1 id='reacting_for_massdk_events'>Reacting for MASSDK Events</h1>

<p><strong>MASSDK</strong> needs embeding app to react for multiple messages to work correctly. Please implement these as follows: </p>
<a href='#promotions' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='promotions'>Promotions</h2>

<p><strong>MASSDK</strong> may show an promotion banner in Side Menu. After user decide to enter promotion purchase, following message will be invoked:</p>

<p><code>MASNotification.PromoBuy</code></p>

<p>Please, add an observer for this notification, like:</p>

<ul>
<li><p>Swift
<code>NSNotificationCenter.defaultCenter().addObserver(self, selector: #selector(HandlerClass.promoBuyTapped), name: MASNotification.PromoBuy.rawValue, object: nil)</code></p></li>
<li><p>Obj-C 
<code>[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(promoBuyTapped:) name:@&quot;MASPromoBuyNotification&quot; object:nil];</code></p></li>
</ul>

<p>As a reaction to this notification, show a new <code>ViewController</code> to user with In-App purchase. </p>
<a href='#in_app_purchases' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='in_app_purchases'>In-App purchases</h2>

<p>MASSDK provides a complete flow of in-app purchase. You can use this flow by setting:</p>

<ul>
<li>Swift

<ul>
<li><code>MASManager.sharedInstance.inAppIdentifier = &quot;cz.master.inAppID&quot;</code></li>
<li><code>MASManager.sharedInstance.inAppInfoText = &quot;Info text&quot;</code></li>
</ul></li>
<li>Obj-C

<ul>
<li><code>[MASManager sharedInstance].inAppIdentifier = @&quot;cz.master.inAppID&quot;;</code></li>
<li><code>[MASManager sharedInstance].inAppInfoText = @&quot;Info text&quot;;</code></li>
</ul></li>
</ul>

<p>This ensures that the correct behaviour will happen after you click on the banner and select BUY button. But you also have to give user a chance to get into the storeViewController somewhow else. (eg. a button in settings or tab bar.)</p>

<ul>
<li><p>Swift</p>
<pre class="highlight plaintext"><code>self.navigationController?.pushViewController(StoreViewController(), animated: true)
</code></pre></li>
<li><p>Obj-C:</p>
<pre class="highlight plaintext"><code>UINavigationController *navCon = [[UINavigationController alloc]initWithRootViewController:[MASStoreViewController new]];
[self.navigationController presentViewController:navCon animated:YES completion:NULL];
</code></pre></li>
</ul>

<p>If you need to implement custom In-app flow, keep reading.</p>

<p>In-App purchases are supposed to run in separate <code>ViewController</code> (let&rsquo;s say <code>StoreViewController</code>).</p>

<p>You will need In-App product identifier (String).</p>

<ol>
<li>First, initialize MASIAPManager

<ul>
<li><code>MASIAPManager(withIdentifier productIdentifier: String, withDelegate delegate: MASIAPManagerDelegate)</code></li>
</ul></li>
<li>Get In-App product price

<ul>
<li><code>iapManager.getPrice()</code></li>
<li><code>MASIAPManagerDelegate</code> has 2 delegate methods to serve you an response:

<ul>
<li><code>func didLoadPriceForProduct(localePriceString: String)</code></li>
<li><code>func didFailToLoadProductPrice(withError error: NSError)</code></li>
</ul></li>
</ul></li>
<li>Call buy product method in MASIAPManager after user&rsquo;s Buy Button tap

<ul>
<li><code>iapManager.buyProduct()</code></li>
<li><code>MASIAPManagerDelegate</code> has 2 delegate methods to serve you state of In-App purchase:

<ul>
<li><code>func transactionFailed()</code> - In-App purchase failed. Show fail alert to user.</li>
<li><code>func transactionSucceeded()</code> - In-App purchase was successfull. You need to show the registration/login view in this method. (see below)</li>
</ul></li>
</ul></li>
</ol>
<a href='#restore_purchases' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h6 id='restore_purchases'>Restore Purchases</h6>

<p>Due to Apple requirement, all <em>non-consumable</em> In-Apps must include <strong>Restore Purchases</strong> button. To restore purchases, call:</p>

<ul>
<li><code>iapManager.restorePurchase()</code>

<ul>
<li><code>MASIAPManagerDelegate</code> has a delegate method to serve you state of In-App restore:

<ul>
<li><code>func nothingToRestore()</code></li>
</ul></li>
<li>Successfull or failed state are served trought these methods:

<ul>
<li><code>func transactionFailed()</code> - In-App restore failed. Show fail alert to user.</li>
<li><code>func transactionSucceeded()</code> - In-App restore was successfull. You need to show the registration/login view in this method. (see below)</li>
</ul></li>
</ul></li>
</ul>
<a href='#handling_user_login_registration' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='handling_user_login_registration'>Handling User Login/Registration</h2>

<p>If you need to login or register user, you have to use our methods to open Login screen or GuidePost screen like this:</p>

<ul>
<li>Swift

<ul>
<li>login or register: <code>MASManager.sharedInstance.showGuideWithMasterTouchView()</code></li>
<li>login: <code>MASManager.sharedInstance.loginUserWithMasterTouchLoginView()</code></li>
</ul></li>
<li>Obj-C
<code>TODO</code></li>
</ul>

<p>After user is succesfully logged in or registered there is notification posted so you can react. (For example to check user state and update UI accordingly)</p>

<ul>
<li><p>Swift:
<code>NSNotificationCenter.defaultCenter().addObserver(self, selector: #selector(didLogIn), name: MASNotification.UserLoggedIn.rawValue, object: nil)</code></p></li>
<li><p>Obj-C:
<code>[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didLogIn:) name:@&quot;MASUserLoggedIn&quot; object:nil];</code></p></li>
</ul>

<p>There is also similar notification after user paid the application:</p>

<ul>
<li><p>Swift:
<code>... name: MASNotification.UserPaid.rawValue ...</code></p></li>
<li><p>Obj-C:
<code>... name:@&quot;MASUserLoggedIn&quot; ...</code></p></li>
</ul>
<a href='#author' class='anchor' aria-hidden=true><span class="header-anchor"></span></a><h2 id='author'>Author</h2>

<p>MasterApp Solutions</p>

          </section>
        </section>
        <section id="footer">
          <p>&copy; 2016 <a class="link" href="https://git.i.masterinter.net/master_ios/MASSDK" target="_blank" rel="external">Martin Púčik</a>. All rights reserved. (Last updated: 2016-08-09)</p>
          <p>Generated by <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external">jazzy ♪♫ v0.6.0</a>, a <a class="link" href="http://realm.io" target="_blank" rel="external">Realm</a> project.</p>
        </section>
      </article>
    </div>
  </body>
</div>
</html>
